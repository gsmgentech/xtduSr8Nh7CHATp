(() => {

  const TRANSITION_MS = 350
  const wrapper = () => document.querySelector('.wrapper')

  window.addEventListener('pageshow', () => {
    wrapper()?.classList.add('slide-enter')
    setTimeout(() => wrapper()?.classList.remove('slide-enter'), TRANSITION_MS)
  })

  document.addEventListener('click', e => {
    const link = e.target.closest('.nav a')
    if (!link || link.classList.contains('active')) return

    e.preventDefault()
    wrapper()?.classList.add('slide-exit')

    setTimeout(() => location.href = link.href, TRANSITION_MS)
  })

})()

