<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Checkout | GTServer</title>

<meta name="theme-color" media="(prefers-color-scheme: light)" content="#f2f4fb">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#0b1220">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
if (localStorage.getItem('theme') === 'dark') {
  document.documentElement.classList.add('dark')
}
</script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="css/style.css">

<style>
.processing-banner{
  display:flex;
  align-items:center;
  gap:10px;
  padding:12px 16px;
  font-size:13px;
  font-weight:700;
  animation:pulse 1.1s ease-in-out infinite;
}
@keyframes pulse{0%{opacity:1}50%{opacity:.45}100%{opacity:1}}
.frp-anim{
  font-family:monospace;
  font-weight:800;
  letter-spacing:2px;
  color:#22c55e;
  min-height:24px;
}
.confirm-overlay,
.connect-overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.65);
  display:flex;
  align-items:center;
  justify-content:center;
  opacity:0;
  pointer-events:none;
  transition:.35s;
  z-index:999;
}
.confirm-overlay.show,
.connect-overlay.show{
  opacity:1;
  pointer-events:auto;
}
.confirm-box,
.connect-box{
  background:#020617;
  width:92%;
  max-width:440px;
  border-radius:18px;
  padding:28px;
  transform:scale(.85);
  transition:.35s;
  text-align:center;
}
.confirm-overlay.show .confirm-box,
.connect-overlay.show .connect-box{
  transform:scale(1);
}
.confirm-actions{
  display:flex;
  gap:10px;
  margin-top:20px;
}
.confirm-actions button{
  flex:1;
  padding:12px;
  border-radius:10px;
  font-weight:700;
  border:none;
}
.confirm-yes{
  background:#22c55e;
  color:#022c22;
}
.confirm-no{
  background:#f87171;
  color:#022c22;
  border:1px solid rgba(248,113,113,.45);
}
.pro-spinner-wrap{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:14px;
}
.pro-spinner{
  width:64px;
  height:64px;
  animation:pro-rotate 1.1s linear infinite;
}
@keyframes pro-rotate{to{transform:rotate(360deg)}}
.pro-spinner-text{
  font-size:13px;
  font-weight:600;
  letter-spacing:.3px;
  opacity:.75;
}
.connect-title{
  font-size:16px;
  font-weight:800;
  margin-top:4px;
}
</style>
</head>

<body>

<header class="header">
  <img src="img/headergentechservernew.png" alt="GTServer">
  <i class="fa-solid fa-ellipsis-vertical menu-toggle"></i>
</header>

<main class="wrapper checkout-wrap">

<div class="page-title-wrap">
  <h2 class="page-title">SAMSUNG FRP REMOVAL – CHECK STATUS</h2>
</div>

<div class="summary">
  <div class="total">₱ 3,000</div>
</div>

<div class="section">
  <label>Email</label>
  <input type="email" required>
</div>

<div class="section">
  <label>IMEI</label>
  <input type="text" required>
</div>

<div id="imeiModal" class="modal-overlay" style="display:none;">
  <div class="modal-box">

    <div id="statusBanner"
         class="processing-banner"
         style="display:none;background:rgba(34,197,94,.22);border-bottom:1px solid rgba(34,197,94,.45);color:#dcfce7;">
      <i id="bannerIcon" class="fa-solid fa-circle-check"></i>
      <span id="bannerText"><strong>CONNECTED TO SAMSUNG SERVER</strong></span>
    </div>

    <div class="modal-header">
      <h3>Samsung IMEI Check Status</h3>
      <button class="modal-close" onclick="closeImeiModal()">
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>

    <div class="modal-body" id="modalBody"></div>
  </div>
</div>

<button type="button" class="pay-btn normal-btn" id="continueBtn">Place Order</button>
<button class="back-btn">Back</button>

</main>

<div id="confirmModal" class="confirm-overlay">
  <div class="confirm-box">
    <div class="connect-title">Confirm Transaction</div>
    <div class="pro-spinner-text">₱3,000 will be credited to your balance</div>
    <div class="confirm-actions">
      <button class="confirm-no" onclick="closeConfirm()">Cancel</button>
      <button class="confirm-yes" onclick="confirmProceed()">Proceed</button>
    </div>
  </div>
</div>

<div id="connectModal" class="connect-overlay">
  <div class="connect-box">
    <div class="pro-spinner-wrap">
      <svg class="pro-spinner" viewBox="0 0 100 100">
        <defs>
          <linearGradient id="spinGradient" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" stop-color="#22c55e"/>
            <stop offset="100%" stop-color="#16a34a"/>
          </linearGradient>
        </defs>
        <circle cx="50" cy="50" r="42" fill="none" stroke="url(#spinGradient)" stroke-width="6" stroke-linecap="round" stroke-dasharray="200" stroke-dashoffset="120"/>
      </svg>
      <div class="connect-title">Connecting to Samsung Secure Server</div>
      <div class="pro-spinner-text">Establishing encrypted session and validating device credentials</div>
    </div>
  </div>
</div>

<script>
let paused=false,currentIndex=0,rollingInterval=null,revealTimeout=null,disconnects=0,maxDisconnects=0

function openImeiModal(html){
  document.getElementById("modalBody").innerHTML=html
  document.getElementById("imeiModal").style.display="flex"
}
function closeImeiModal(){
  document.getElementById("imeiModal").style.display="none"
}

function setBanner(type,text,icon){
  const b=document.getElementById("statusBanner")
  let bg,color,border
  if(type==="green"){bg="rgba(34,197,94,.22)";color="#dcfce7";border="rgba(34,197,94,.45)"}
  if(type==="red"){bg="rgba(239,68,68,.22)";color="#fecaca";border="rgba(239,68,68,.45)"}
  if(type==="yellow"){bg="rgba(234,179,8,.22)";color="#fef3c7";border="rgba(234,179,8,.45)"}
  b.style.display="flex"
  b.style.background=bg
  b.style.color=color
  b.style.borderBottom="1px solid "+border
  b.innerHTML=`<i class="${icon}"></i><strong>${text}</strong>`
}

function renderSamsungResult(){
  const data=[
    ["Manufacturer","Samsung Electronics Vietnam Co., Ltd. (SEVT)"],
    ["Model Name","Galaxy S25 Ultra"],
    ["IMEI1","350883720373070"],
    ["IMEI2","352396300373079"],
    ["Serial Number","R5CY12K92ED"],
    ["FRP PIN",`<span id="frpPin" class="frp-anim"></span>`]
  ]
  let h=`<div class="result-grid"><div style="font-weight:800;margin-bottom:6px;">Device Information</div>`
  data.forEach(([k,v])=>h+=`<div class="result-item"><div class="label">${k}</div><div class="value">${v}</div></div>`)
  return h+`</div>`
}

function animateFRPPin(){
  const pin="521422615512"
  const el=document.getElementById("frpPin")
  function roll(){rollingInterval=setInterval(()=>el.textContent=pin.slice(0,currentIndex)+Math.floor(Math.random()*10),90)}
  function stop(){clearInterval(rollingInterval)}
  function next(){
    if(currentIndex>=pin.length){stop();el.textContent=pin;return}
    if(paused){setTimeout(next,1000);return}
    roll()
    setTimeout(()=>{stop();currentIndex++;el.textContent=pin.slice(0,currentIndex);next()},25000)
  }
  next()
}

function randomDisconnectFlow(){
  if(disconnects>=maxDisconnects){
    paused=true
    setBanner("red","DISCONNECTED FROM SAMSUNG SERVER","fa-solid fa-triangle-exclamation")
    return
  }
  setTimeout(()=>{
    paused=true
    setBanner("red","DISCONNECTED FROM SAMSUNG SERVER","fa-solid fa-triangle-exclamation")
    setTimeout(()=>{
      paused=false
      setBanner("yellow","RECONNECTING TO SAMSUNG SERVER","fa-solid fa-arrows-rotate")
      setTimeout(()=>{
        setBanner("green","CONNECTED TO SAMSUNG SERVER","fa-solid fa-circle-check")
        disconnects++
        randomDisconnectFlow()
      },4000)
    },3000)
  },Math.floor(Math.random()*8000)+6000)
}

function openConfirm(){document.getElementById("confirmModal").classList.add("show")}
function closeConfirm(){document.getElementById("confirmModal").classList.remove("show")}
function openConnect(){document.getElementById("connectModal").classList.add("show")}
function closeConnect(){document.getElementById("connectModal").classList.remove("show")}

function confirmProceed(){
  closeConfirm()
  openConnect()
  setTimeout(()=>{
    closeConnect()
    paused=false
    currentIndex=0
    disconnects=0
    maxDisconnects=Math.floor(Math.random()*3)+3
    openImeiModal(renderSamsungResult())
    setBanner("green","CONNECTED TO SAMSUNG SERVER","fa-solid fa-circle-check")
    animateFRPPin()
    randomDisconnectFlow()
  },120000)
}

document.getElementById("continueBtn").addEventListener("click",e=>{
  e.preventDefault()
  e.stopImmediatePropagation()
  openConfirm()
  return false
},true)
</script>

<script src="js/app.chk.min.js?v=1.0.6"></script>
<script src="js/app.flow.min.js?v=1.0.6"></script>
<script src="js/app.core.min.js?v=1.0.4" defer></script>
<script src="js/app.boot.min.js?v=1.0.4" defer></script>
<script src="js/app.guard.min.js?v=1.0.4" defer></script>

</body>
</html>
