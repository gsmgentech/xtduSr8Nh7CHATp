<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Checkout | GTServer</title>

<meta name="theme-color" media="(prefers-color-scheme: light)" content="#f2f4fb">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#0b1220">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
if (localStorage.getItem('theme') === 'dark') {
  document.documentElement.classList.add('dark')
}
</script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="css/style.css">

<style>
.processing-banner{
  display:flex;
  align-items:center;
  gap:10px;
  padding:12px 16px;
  font-size:13px;
  font-weight:700;
  animation:pulse 1.1s ease-in-out infinite;
  background:none !important;
  background-image:none !important;
}
@keyframes pulse{
  0%{opacity:1}
  50%{opacity:.45}
  100%{opacity:1}
}
.frp-anim{
  font-family:monospace;
  font-weight:800;
  letter-spacing:2px;
  color:#22c55e;
  min-height:24px;
}
.confirm-overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.65);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:999;
  opacity:0;
  pointer-events:none;
  transition:.35s;
}
.confirm-overlay.show{
  opacity:1;
  pointer-events:auto;
}
.confirm-box{
  background:#020617;
  width:92%;
  max-width:420px;
  border-radius:16px;
  padding:22px;
  transform:scale(.85);
  transition:.35s;
}
.confirm-overlay.show .confirm-box{
  transform:scale(1);
}
.confirm-icon{
  font-size:36px;
  color:#22c55e;
  text-align:center;
  margin-bottom:12px;
}
.confirm-title{
  text-align:center;
  font-size:18px;
  font-weight:800;
  margin-bottom:8px;
}
.confirm-text{
  text-align:center;
  font-size:14px;
  opacity:.8;
  margin-bottom:20px;
}
.confirm-actions{
  display:flex;
  gap:10px;
}
.confirm-actions button{
  flex:1;
  padding:12px;
  border-radius:10px;
  font-weight:700;
  border:none;
}
.confirm-yes{
  background:#22c55e;
  color:#022c22;
}
.confirm-no{
  background:#020617;
  color:#cbd5f5;
  border:1px solid #1e293b;
}
</style>
</head>

<body>

<header class="header">
  <img src="img/headergentechservernew.png" alt="GTServer">
  <i class="fa-solid fa-ellipsis-vertical menu-toggle"></i>
</header>

<main class="wrapper checkout-wrap">

<div class="page-title-wrap">
  <h2 class="page-title">SAMSUNG FRP REMOVAL – CHECK STATUS</h2>
</div>

<div class="summary">
  <div class="total">₱ 3,000</div>
</div>

<div class="section">
  <label>Email</label>
  <input type="email" required>
</div>

<div class="section">
  <label>IMEI</label>
  <input type="text" required>
</div>

<div id="imeiModal" class="modal-overlay" style="display:none;">
  <div class="modal-box">

    <div id="statusBanner"
         class="processing-banner"
         style="display:none;background:rgba(34,197,94,.22);border-bottom:1px solid rgba(34,197,94,.45);color:#dcfce7;">
      <i id="bannerIcon" class="fa-solid fa-circle-check"></i>
      <span id="bannerText"><strong>CONNECTED TO SAMSUNG SERVER</strong></span>
    </div>

    <div class="modal-header">
      <h3>Samsung IMEI Check Status</h3>
      <button class="modal-close" onclick="closeImeiModal()">
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>

    <div class="modal-body" id="modalBody"></div>
  </div>
</div>

<button type="button" class="pay-btn normal-btn" id="continueBtn">Place Order</button>
<button class="back-btn">Back</button>

</main>

<div id="confirmModal" class="confirm-overlay">
  <div class="confirm-box">
    <div class="confirm-icon"><i class="fa-solid fa-wallet"></i></div>
    <div class="confirm-title">Confirm Transaction</div>
    <div class="confirm-text">₱3,000 will be credited to your balance</div>
    <div class="confirm-actions">
      <button class="confirm-no" onclick="closeConfirm()">Cancel</button>
      <button class="confirm-yes" onclick="confirmProceed()">Proceed</button>
    </div>
  </div>
</div>

<script>
let paused=false;
let currentIndex=0;
let revealTimeout=null;
let rollingInterval=null;

function openImeiModal(html){
  document.getElementById("modalBody").innerHTML=html;
  document.getElementById("imeiModal").style.display="flex";
}
function closeImeiModal(){
  document.getElementById("imeiModal").style.display="none";
}

function setBanner(type,text,icon){
  const b=document.getElementById("statusBanner");
  const t=document.getElementById("bannerText");
  const i=document.getElementById("bannerIcon");
  let bg,color,border;
  if(type==="green"){bg="rgba(34,197,94,.22)";color="#dcfce7";border="rgba(34,197,94,.45)"}
  if(type==="red"){bg="rgba(239,68,68,.22)";color="#fecaca";border="rgba(239,68,68,.45)"}
  if(type==="yellow"){bg="rgba(234,179,8,.22)";color="#fef3c7";border="rgba(234,179,8,.45)"}
  b.style.display="flex";
  b.style.background=bg;
  b.style.color=color;
  b.style.borderBottom="1px solid "+border;
  t.innerHTML="<strong>"+text+"</strong>";
  i.className=icon;
}

function renderSamsungResult(){
  const data=[
    ["Manufacturer","Samsung Electronics Vietnam Co., Ltd. (SEVT)"],
    ["Model Name","Galaxy S25 Ultra"],
    ["IMEI1","350883720373070"],
    ["IMEI2","352396300373079"],
    ["Serial Number","R5CY12K92ED"],
    ["FRP PIN",`<span id="frpPin" class="frp-anim"></span>`]
  ];
  let html=`<div class="result-grid"><div style="font-weight:800;margin-bottom:6px;">Device Information</div>`;
  data.forEach(([k,v])=>{
    html+=`<div class="result-item"><div class="label">${k}</div><div class="value">${v}</div></div>`;
  });
  return html+`</div>`;
}

function animateFRPPin(){
  const finalPin="521422615512";
  const el=document.getElementById("frpPin");
  const delayPerDigit=25000;
  const rollSpeed=90;
  function startRolling(){
    stopRolling();
    rollingInterval=setInterval(()=>el.textContent=finalPin.slice(0,currentIndex)+Math.floor(Math.random()*10),rollSpeed);
  }
  function stopRolling(){
    if(rollingInterval){clearInterval(rollingInterval);rollingInterval=null}
  }
  function next(){
    if(currentIndex>=finalPin.length){stopRolling();el.textContent=finalPin;return}
    if(paused){revealTimeout=setTimeout(next,1000);return}
    startRolling();
    revealTimeout=setTimeout(()=>{stopRolling();currentIndex++;el.textContent=finalPin.slice(0,currentIndex);next()},delayPerDigit);
  }
  next();
}

function openConfirm(){
  document.getElementById("confirmModal").classList.add("show");
}
function closeConfirm(){
  document.getElementById("confirmModal").classList.remove("show");
}
function confirmProceed(){
  closeConfirm();
  paused=false;
  currentIndex=0;
  openImeiModal(renderSamsungResult());
  setBanner("green","CONNECTED TO SAMSUNG SERVER","fa-solid fa-circle-check");
  animateFRPPin();
  setTimeout(()=>{paused=true;setBanner("red","DISCONNECTED FROM SAMSUNG SERVER","fa-solid fa-triangle-exclamation")},30000);
  setTimeout(()=>{setBanner("yellow","RECONNECTING FROM SAMSUNG SERVER","fa-solid fa-arrows-rotate")},40000);
  setTimeout(()=>{paused=false;setBanner("green","CONNECTED FROM SAMSUNG SERVER","fa-solid fa-circle-check")},70000);
}

document.getElementById("continueBtn").addEventListener("click",function(e){
  e.preventDefault();
  e.stopImmediatePropagation();
  openConfirm();
  return false;
},true);
</script>

<script src="js/app.chk.min.js?v=1.0.6"></script>
<script src="js/app.flow.min.js?v=1.0.6"></script>
<script src="js/app.core.min.js?v=1.0.4" defer></script>
<script src="js/app.boot.min.js?v=1.0.4" defer></script>
<script src="js/app.guard.min.js?v=1.0.4" defer></script>

</body>
</html>
