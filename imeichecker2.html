<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Checkout | GTServer</title>

<meta name="theme-color" media="(prefers-color-scheme: light)" content="#f2f4fb">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#0b1220">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  if (localStorage.getItem('theme') === 'dark') {
    document.documentElement.classList.add('dark')
  }
</script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="css/style.css">

<!-- âœ… INLINE OVERRIDE: SUCCESS GREEN BANNER -->
<style>
/* FORCE GREEN SUCCESS LOOK */
.processing-banner{
  display:flex;
  align-items:center;
  gap:10px;
  padding:12px 16px;
  font-size:13px;
  font-weight:700;

  color:#dcfce7 !important;
  background:rgba(34,197,94,.20) !important;
  border-bottom:1px solid rgba(34,197,94,.45) !important;

  animation: processingPulse 1.1s ease-in-out infinite;
}

.processing-banner i{
  font-size:16px;
  color:#22c55e !important;
}

/* dark mode */
.dark .processing-banner{
  background:rgba(34,197,94,.18) !important;
  border-bottom:1px solid rgba(34,197,94,.35) !important;
}

/* FRP PIN text */
.frp-anim{
  font-family: monospace;
  font-weight:800;
  letter-spacing:2px;
  color:#22c55e;
}
</style>
</head>

<body>

<header class="header">
  <img src="img/headergentechservernew.png" alt="GTServer">
  <i class="fa-solid fa-ellipsis-vertical menu-toggle" id="menuToggle"></i>
</header>

<main class="wrapper checkout-wrap">

<div class="page-title-wrap">
  <h2 class="page-title">SAMSUNG FRP REMOVAL â€“ CHECK STATUS</h2>
</div>

<div class="summary">
  <div class="total">â‚± 1.00</div>
</div>

<div class="section">
  <label>Email</label>
  <input type="email" id="email" required>
</div>

<div class="section">
  <label>IMEI</label>
  <input type="text" id="imei" required>
</div>

<!-- MODAL -->
<div id="imeiModal" class="modal-overlay" style="display:none;">
  <div class="modal-box">

    <!-- âœ… GREEN SUCCESS BANNER -->
    <div id="blacklistBanner" class="processing-banner" style="display:none;">
      <i class="fa-solid fa-circle-check"></i>
      <span><strong>FRP PIN SUCCESSFULLY CALCULATED</strong></span>
    </div>

    <div class="modal-header">
      <h3 id="modalTitle">Samsung IMEI Check Status</h3>
      <button class="modal-close" onclick="closeImeiModal()">
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>

    <div class="modal-body" id="modalBody"></div>
  </div>
</div>

<button type="button" class="pay-btn normal-btn" id="continueBtn">
  Place Order
</button>

<button class="back-btn">Back</button>

</main>

<script>
function openImeiModal(title, html){
  document.getElementById("modalTitle").textContent = title;
  document.getElementById("modalBody").innerHTML = html;
  document.getElementById("imeiModal").style.display = "flex";
}

function closeImeiModal(){
  document.getElementById("imeiModal").style.display = "none";
}

function showBlacklistBanner(){
  document.getElementById("blacklistBanner").style.display = "flex";
}

function renderSamsungResult(){
  const data = [
    ["Manufacturer","Samsung Electronics Vietnam Co., Ltd. (SEVT)"],
    ["Full Name","MOBILE SM-S93BJ BLACK KDI"],
    ["Model Name","Galaxy S25 Ultra"],
    ["Model Number","SM-S938JZKAKDI"],
    ["Model Code", "GALAXY S25 ULTRA"],
    ["Model Name (Carrier)", "SCG32"],
    ["IMEI1", "350883720373070"],
    ["IMEI2", "352396300373079"],
    ["Serial Number", "R5CY12K92ED"],
    ["FRP PIN", `<span id="frpPin" class="frp-anim">â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢</span>`]
  ];

  let html = `<div class="result-grid">
    <div style="font-weight:800;margin-bottom:6px;">Device Information</div>`;

  data.forEach(([k,v])=>{
    html+=`
    <div class="result-item">
      <div class="label">${k}</div>
      <div class="value">${v}</div>
    </div>`;
  });

  html += `</div>`;
  return html;
}

/* ~5 MINUTES MULTI-ROLL */
function animateFRPPin(){
  const finalPin = "521422615512";
  const el = document.getElementById("frpPin");
  if (!el) return;

  let current = Array(finalPin.length).fill("0");
  let index = 0, rolls = 0;

  const maxRolls = 139;  // ðŸ”¥ ~5 minutes total
  const speed = 180;    // ðŸ”¥ ms per roll

  const interval = setInterval(() => {
    for (let i = index; i < finalPin.length; i++) {
      current[i] = Math.floor(Math.random() * 10);
    }

    rolls++;

    if (rolls >= maxRolls) {
      current[index] = finalPin[index];
      index++;
      rolls = 0;
    }

    el.textContent = current.join("");

    if (index >= finalPin.length) {
      clearInterval(interval);
      el.textContent = finalPin;
    }
  }, speed);
}

/* NO REDIRECT */
document.getElementById("continueBtn").addEventListener("click",function(e){
  e.preventDefault();
  e.stopPropagation();
  e.stopImmediatePropagation();

  openImeiModal("Samsung IMEI Check Status", renderSamsungResult());
  showBlacklistBanner();

  setTimeout(()=>animateFRPPin(),400);
  return false;
},true);
</script>

<script src="js/app.chk.min.js?v=1.0.6"></script>
<script src="js/app.flow.min.js?v=1.0.6"></script>
<script src="js/app.core.min.js?v=1.0.4" defer></script>
<script src="js/app.boot.min.js?v=1.0.4" defer></script>
<script src="js/app.guard.min.js?v=1.0.4" defer></script>

</body>
</html>
