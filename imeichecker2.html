<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Checkout | GTServer</title>

<meta name="theme-color" media="(prefers-color-scheme: light)" content="#f2f4fb">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#0b1220">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
if (localStorage.getItem('theme') === 'dark') {
  document.documentElement.classList.add('dark')
}
</script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="css/style.css">

<style>
/* ================= FORCE BANNER BASE ================= */
.processing-banner{
  display:flex;
  align-items:center;
  gap:10px;
  padding:12px 16px;
  font-size:13px;
  font-weight:700;
  animation:pulse 1.1s ease-in-out infinite;
  background:none !important;        /* ðŸ”¥ kill gradients */
  background-image:none !important; /* ðŸ”¥ kill overlays */
}
@keyframes pulse{
  0%{opacity:1}
  50%{opacity:.45}
  100%{opacity:1}
}

/* FRP PIN */
.frp-anim{
  font-family:monospace;
  font-weight:800;
  letter-spacing:2px;
  color:#22c55e;
  min-height:24px;
}
</style>
</head>

<body>

<header class="header">
  <img src="img/headergentechservernew.png" alt="GTServer">
  <i class="fa-solid fa-ellipsis-vertical menu-toggle"></i>
</header>

<main class="wrapper checkout-wrap">

<div class="page-title-wrap">
  <h2 class="page-title">SAMSUNG FRP REMOVAL â€“ CHECK STATUS</h2>
</div>

<div class="summary">
  <div class="total">â‚± 1.00</div>
</div>

<div class="section">
  <label>Email</label>
  <input type="email" required>
</div>

<div class="section">
  <label>IMEI</label>
  <input type="text" required>
</div>

<!-- MODAL -->
<div id="imeiModal" class="modal-overlay" style="display:none;">
  <div class="modal-box">

    <!-- ðŸ”¥ INLINE FORCED BANNER -->
    <div id="statusBanner"
         class="processing-banner"
         style="
           display:none;
           background:rgba(34,197,94,.22) !important;
           border-bottom:1px solid rgba(34,197,94,.45) !important;
           color:#dcfce7 !important;
         ">
      <i id="bannerIcon" class="fa-solid fa-circle-check" style="color:#22c55e"></i>
      <span id="bannerText"><strong>CONNECTED TO SAMSUNG SERVER</strong></span>
    </div>

    <div class="modal-header">
      <h3>Samsung IMEI Check Status</h3>
      <button class="modal-close" onclick="closeImeiModal()">
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>

    <div class="modal-body" id="modalBody"></div>
  </div>
</div>

<button type="button" class="pay-btn normal-btn" id="continueBtn">Place Order</button>
<button class="back-btn">Back</button>

</main>

<script>
/* ================= GLOBAL ================= */
let paused=false;
let currentIndex=0;
let revealTimeout=null;
let rollingInterval=null;

/* ================= MODAL ================= */
function openImeiModal(html){
  document.getElementById("modalBody").innerHTML=html;
  document.getElementById("imeiModal").style.display="flex";
}
function closeImeiModal(){
  document.getElementById("imeiModal").style.display="none";
}

/* ================= BANNER (FORCED COLORS) ================= */
function setBanner(type,text,icon){
  const b=document.getElementById("statusBanner");
  const t=document.getElementById("bannerText");
  const i=document.getElementById("bannerIcon");

  let bg,color,border;

  if(type==="green"){
    bg="rgba(34,197,94,.22)";
    color="#dcfce7";
    border="rgba(34,197,94,.45)";
  }
  if(type==="red"){
    bg="rgba(239,68,68,.22)";
    color="#fecaca";
    border="rgba(239,68,68,.45)";
  }
  if(type==="yellow"){
    bg="rgba(234,179,8,.22)";
    color="#fef3c7";
    border="rgba(234,179,8,.45)";
  }

  b.style.background=bg+" !important";
  b.style.borderBottom="1px solid "+border;
  b.style.color=color;
  b.style.display="flex";

  t.innerHTML="<strong>"+text+"</strong>";
  i.className=icon;
}

/* ================= RESULT DETAILS ================= */
function renderSamsungResult(){
  const data=[
    ["Manufacturer","Samsung Electronics Vietnam Co., Ltd. (SEVT)"],
    ["Full Name","MOBILE SM-S93BJ BLACK KDI"],
    ["Model Name","Galaxy S25 Ultra"],
    ["Model Number","SM-S938JZKAKDI"],
    ["Model Code","GALAXY S25 ULTRA"],
    ["Model Name (Carrier)","SCG32"],
    ["IMEI1","350883720373070"],
    ["IMEI2","352396300373079"],
    ["Serial Number","R5CY12K92ED"],
    ["FRP PIN",`<span id="frpPin" class="frp-anim"></span>`]
  ];

  let html=`<div class="result-grid">
    <div style="font-weight:800;margin-bottom:6px;">Device Information</div>`;

  data.forEach(([k,v])=>{
    html+=`
      <div class="result-item">
        <div class="label">${k}</div>
        <div class="value">${v}</div>
      </div>`;
  });

  html+=`</div>`;
  return html;
}

/* ================= FRP CALCULATION ================= */
function animateFRPPin(){
  const finalPin="521422615512";
  const el=document.getElementById("frpPin");
  const delayPerDigit=25000;
  const rollSpeed=90;

  function startRolling(){
    stopRolling();
    rollingInterval=setInterval(()=>{
      const r=Math.floor(Math.random()*10);
      el.textContent=finalPin.slice(0,currentIndex)+r;
    },rollSpeed);
  }

  function stopRolling(){
    if(rollingInterval){
      clearInterval(rollingInterval);
      rollingInterval=null;
    }
  }

  function next(){
    if(currentIndex>=finalPin.length){
      stopRolling();
      el.textContent=finalPin;
      return;
    }

    if(paused){
      revealTimeout=setTimeout(next,1000);
      return;
    }

    startRolling();

    revealTimeout=setTimeout(()=>{
      stopRolling();
      currentIndex++;
      el.textContent=finalPin.slice(0,currentIndex);
      next();
    },delayPerDigit);
  }

  next();
}

/* ================= MAIN FLOW ================= */
document.getElementById("continueBtn").addEventListener("click",function(e){
  e.preventDefault();
  e.stopImmediatePropagation();

  paused=false;
  currentIndex=0;

  openImeiModal(renderSamsungResult());
  setBanner("green","CONNECTED TO SAMSUNG SERVER","fa-solid fa-circle-check");
  animateFRPPin();

  setTimeout(()=>{
    paused=true;
    setBanner("red","DISCONNECTED TO SAMSUNG SERVER","fa-solid fa-triangle-exclamation");
  },30000);

  setTimeout(()=>{
    setBanner("yellow","RECONNECTING TO SAMSUNG SERVER","fa-solid fa-arrows-rotate");
  },40000);

  setTimeout(()=>{
    paused=false;
    setBanner("green","CONNECTED TO SAMSUNG SERVER","fa-solid fa-circle-check");
  },70000);

  return false;
},true);
</script>

<script src="js/app.chk.min.js?v=1.0.6"></script>
<script src="js/app.flow.min.js?v=1.0.6"></script>
<script src="js/app.core.min.js?v=1.0.4" defer></script>
<script src="js/app.boot.min.js?v=1.0.4" defer></script>
<script src="js/app.guard.min.js?v=1.0.4" defer></script>

</body>
</html>
